<html>
    <head>
        <title>MOHPP</title>
       
	<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script type="text/javascript" src="eel.js"></script>
<script src="https://cdn.plot.ly/plotly-2.4.2.min.js"></script>
<script>
        async function getVal() {
  let value = await eel.getTVal()();
   console.log( value);
   plotVal('plot', value);
   request_values();
   
  }
 
           
//eel.expose(request_values);
function request_values(){
  getVal();
            	
}

function plotVal(div, value){
  
  const data = []
  
  var theta = Math.PI/2 
  for (let i = 0; i<4;i++){
      if (value[i]>0.05 && value[i]<4){
      var x = [0,value[i]*Math.cos(Math.PI*2 +theta)];
      var y = [0,value[i]*Math.sin(Math.PI*2 +theta)];
      }
      else {
      var x= [0,0];
      var y = [0,0];
      }
      data[data.length] = {x, y, mode:'markers', type:'scatter', marker:{size:12}};
      theta -=Math.PI/2; 
  }
  var theta = Math.PI/4
    for (let i = 4; i<8;i++){
      if (value[i]>0.05 && value[i]<4){
      var x = [0,value[i]*Math.cos(Math.PI*2 +theta)];
      var y = [0,value[i]*Math.sin(Math.PI*2 +theta)];
      }
      else {
      var x= [0,0];
      var y = [0,0];
      }
      data[data.length] = {x, y, mode:'markers', type:'scatter', marker:{size:12}};
      theta -=Math.PI/2; 
  }


  var layout = {
  xaxis: {
    range: [ -4.00, 4.00 ]
  },
  yaxis: {
    range: [-4.00, 4.00]
  }
    };

Plotly.newPlot('plot', data, layout);
}
//getVal();

</script>

<link rel="stylesheet" href="css/rendering.css">	


   </head>
     <body>
         <header>
             <div id='control'>
                 <input class = "but" type="button" onclick="/js/jsFunction" value="Connect" >
                 <input class = "but" type="button" onclick="" value="Guided" >
         	<input class = "but" type="button" onclick="" value="Take-off">
         	<input class = "but" type="button" onclick="" value="Land">
		        	
             </div>
             <div>
             	<p>safety: 
             		<input type="range" id="as" name="a" value="25" min="1" max="99" onchange="document.getElementById ('a').value=this.value;" >
             	<output type="text" id="a" >25</output>
             		</input>
             		
             		<span>%</span>
             	</p> </div>
         </header>
         
         <section>
             <nav>
                 <p >Battery:
                     <span id="battery" >
                       <script>
             		    function Battery(id){
             			var x = Math.floor(Math.random() * 100);
             			console.log(x);
             			document.getElementById(id).innerHTML = x;
             			if (x>=50){
             			document.getElementById(id).style.color="white";}
             			else if(x>=25 && x<50){
             			document.getElementById(id).style.color="orange";}
             			else if(0<=x<25){
             			document.getElementById(id).style.color="red";}
             			return x
             			}
             		    Battery("battery");
             	        </script>
             	         %
                     </span> 
                 </p>
                 <p>Altitude: <span id="alt" style="color:white">4.25 m</span></p>
                 <p> Speed: <span id="spd"style="color:white">1.25 m/s</span></p>
             </nav>
             <article>
                 <div id='plot'> </div>
             </article>
         </section>
         <footer>@ Nassim SADALLAH</footer>
    </body>
</html>

